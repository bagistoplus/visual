var ce=Object.defineProperty,de=(r,e,t)=>e in r?ce(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,b=(r,e,t)=>de(r,typeof e!="symbol"?e+"":e,t);class fe{constructor(e,t="*"){b(this,"handlers",new Map),b(this,"targetWindow"),b(this,"targetOrigin"),b(this,"fallbackHandler"),this.targetWindow=e,this.targetOrigin=t,window.addEventListener("message",this.handleMessage.bind(this))}handleMessage(e){const t=e.data;if(!t.type)return;const n=this.handlers.get(t.type);n?n.forEach(i=>i(t.payload,e)):this.fallbackHandler&&this.fallbackHandler(e.data,e)}send(e,t){const n={type:e,payload:t};this.targetWindow.postMessage(n,this.targetOrigin)}listen(e,t){return this.handlers.has(e)||this.handlers.set(e,[]),this.handlers.get(e).push(t),()=>{const n=this.handlers.get(e);if(n){const i=n.indexOf(t);i>-1&&n.splice(i,1)}}}registerFallbackHandler(e){this.fallbackHandler=e}}function he(r="*"){if(window.parent===window)throw new Error("Not inside an iframe");return new fe(window.parent,r)}class ue{constructor(){b(this,"listeners",new Map)}on(e,t){return this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(t),()=>{this.off(e,t)}}off(e,t){const n=this.listeners.get(e);n&&(n.delete(t),n.size===0&&this.listeners.delete(e))}once(e,t){const n=i=>{t(i),this.off(e,n)};this.on(e,n)}emit(e,...t){const n=this.listeners.get(e);if(n){const i=t[0];n.forEach(s=>{try{s(i)}catch(o){console.error(`Error in event listener for '${String(e)}':`,o)}})}}removeAllListeners(e){e?this.listeners.delete(e):this.listeners.clear()}}class ve{constructor(e){b(this,"active",!0),b(this,"messenger"),b(this,"currentHoveredBlock",null),b(this,"currentSelectedBlock",null),b(this,"overlayButtonHovered",!1),b(this,"resizeObserver",null),b(this,"mutationObserver",null),this.messenger=e,this.messenger.listen("craftile.inspector.enable",()=>this.enable()),this.messenger.listen("craftile.inspector.disable",()=>this.disable()),this.messenger.listen("craftile.inspector.overlay-button-enter",this.handleOverlayButtonEnter.bind(this)),this.messenger.listen("craftile.inspector.overlay-button-leave",this.handleOverlayButtonLeave.bind(this)),this.messenger.listen("craftile.editor.select-block",this.handleEditorSelectBlock.bind(this)),this.messenger.listen("craftile.editor.deselect-block",this.handleEditorDeselectBlock.bind(this)),window.addEventListener("scroll",this.handleScroll.bind(this),{passive:!0}),this.setupGlobalEventListeners()}enable(){this.active=!0,document.body.classList.add("craftile-inspector-active")}disable(){this.active=!1,document.body.classList.remove("craftile-inspector-active"),this.currentHoveredBlock=null,this.currentSelectedBlock=null,this.overlayButtonHovered=!1}handleOverlayButtonEnter(){this.overlayButtonHovered=!0}handleOverlayButtonLeave(e){this.overlayButtonHovered=!1,this.currentHoveredBlock||this.messenger.send("craftile.preview.block-leave")}handleEditorSelectBlock(e){const t=document.querySelector(`[data-block="${e.blockId}"]`);t&&(this.currentSelectedBlock=t,this.sendSelectedBlockPosition(),this.trackSelectedBlock())}handleEditorDeselectBlock(){this.currentSelectedBlock=null,this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)}handleScroll(){this.currentSelectedBlock&&this.sendSelectedBlockPosition(),this.currentHoveredBlock&&this.sendHoveredBlockPosition()}setupGlobalEventListeners(){document.addEventListener("mouseover",this.handleGlobalHover.bind(this)),document.addEventListener("mouseout",this.handleGlobalLeave.bind(this)),document.addEventListener("click",this.handleGlobalClick.bind(this))}handleGlobalHover(e){if(!this.active)return;const t=e.target.closest("[data-block]");t&&(e.stopPropagation(),this.currentHoveredBlock=t,this.sendHoveredBlockPosition())}handleGlobalLeave(e){!this.active||!e.target.closest("[data-block]")||this.overlayButtonHovered||(this.currentHoveredBlock=null,this.messenger.send("craftile.preview.block-leave"))}handleGlobalClick(e){if(this.messenger.send("craftile.preview.click"),!this.active)return;const t=e.target.closest("[data-block]");if(!t)return;e.stopPropagation(),t.getAttribute("data-block")&&(this.currentSelectedBlock=t,this.sendSelectedBlockPosition(),this.trackSelectedBlock())}sendHoveredBlockPosition(){const e=this.computeElementPositioning(this.currentHoveredBlock);this.messenger.send("craftile.preview.block-hover",{blockRect:e.rect,parentRect:e.parentRect,scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,blockId:this.currentHoveredBlock.dataset.block,parentFlexDirection:e.parentFlexDirection})}sendSelectedBlockPosition(e=!1){const t=this.computeElementPositioning(this.currentSelectedBlock);this.messenger.send(e?"craftile.preview.update-selected-block":"craftile.preview.block-select",{blockRect:t.rect,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft,blockId:this.currentSelectedBlock.dataset.block})}trackSelectedBlock(){if(!this.currentSelectedBlock)return;this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null),this.resizeObserver=new ResizeObserver(()=>{this.sendSelectedBlockPosition(!0)}),this.resizeObserver.observe(this.currentSelectedBlock),this.mutationObserver=new MutationObserver(()=>{this.sendSelectedBlockPosition(!0)}),this.mutationObserver.observe(this.currentSelectedBlock,{attributes:!0,subtree:!1});let e=this.currentSelectedBlock.parentElement;for(;e&&(this.mutationObserver.observe(e,{childList:!0,subtree:!1}),e!==document.body);)e=e.parentElement}computeElementPositioning(e){const t=e.getBoundingClientRect(),n=window.pageYOffset||document.documentElement.scrollTop,i=window.pageXOffset||document.documentElement.scrollLeft,s=this.findEldestParentBlock(e),o=s&&s!==e?s.getBoundingClientRect():void 0,l=this.getElementFlexDirection(e.parentElement);return{rect:t,parentRect:o,scrollTop:n,scrollLeft:i,parentFlexDirection:l}}findEldestParentBlock(e){let t=null,n=e.parentElement;for(;n&&n!==document.body;)n.hasAttribute("data-block")&&(t=n),n=n.parentElement;return t}getElementFlexDirection(e){if(!e)return"column";const t=window.getComputedStyle(e),n=t.display.includes("flex")?t.flexDirection:"column";return n==="row"||n==="row-reverse"?"row":"column"}}class ie extends ue{constructor(){super(),b(this,"messenger"),b(this,"inspector"),this.messenger=he(window.origin),this.inspector=new ve(this.messenger),this.initialize()}initialize(){window.addEventListener("load",()=>{this.messenger.send("craftile.preview.ready",{}),setTimeout(()=>{this.sendPageData()},0)}),this.messenger.registerFallbackHandler(e=>{const{type:t,payload:n}=e;this.emit(t,n)})}sendPageData(){const e=document.getElementById("page-data");if(e)try{const t=JSON.parse(e.textContent||"{}");this.messenger.send("craftile.preview.page-data",{pageData:t})}catch(t){console.error("Failed to parse page data:",t)}}}var Q=11;function me(r,e){var t=e.attributes,n,i,s,o,l;if(!(e.nodeType===Q||r.nodeType===Q)){for(var d=t.length-1;d>=0;d--)n=t[d],i=n.name,s=n.namespaceURI,o=n.value,s?(i=n.localName||i,l=r.getAttributeNS(s,i),l!==o&&(n.prefix==="xmlns"&&(i=n.name),r.setAttributeNS(s,i,o))):(l=r.getAttribute(i),l!==o&&r.setAttribute(i,o));for(var m=r.attributes,u=m.length-1;u>=0;u--)n=m[u],i=n.name,s=n.namespaceURI,s?(i=n.localName||i,e.hasAttributeNS(s,i)||r.removeAttributeNS(s,i)):e.hasAttribute(i)||r.removeAttribute(i)}}var D,pe="http://www.w3.org/1999/xhtml",g=typeof document>"u"?void 0:document,be=!!g&&"content"in g.createElement("template"),ge=!!g&&g.createRange&&"createContextualFragment"in g.createRange();function ke(r){var e=g.createElement("template");return e.innerHTML=r,e.content.childNodes[0]}function we(r){D||(D=g.createRange(),D.selectNode(g.body));var e=D.createContextualFragment(r);return e.childNodes[0]}function Be(r){var e=g.createElement("body");return e.innerHTML=r,e.childNodes[0]}function ye(r){return r=r.trim(),be?ke(r):ge?we(r):Be(r)}function R(r,e){var t=r.nodeName,n=e.nodeName,i,s;return t===n?!0:(i=t.charCodeAt(0),s=n.charCodeAt(0),i<=90&&s>=97?t===n.toUpperCase():s<=90&&i>=97?n===t.toUpperCase():!1)}function Ee(r,e){return!e||e===pe?g.createElement(r):g.createElementNS(e,r)}function Ce(r,e){for(var t=r.firstChild;t;){var n=t.nextSibling;e.appendChild(t),t=n}return e}function W(r,e,t){r[t]!==e[t]&&(r[t]=e[t],r[t]?r.setAttribute(t,""):r.removeAttribute(t))}var Z={OPTION:function(r,e){var t=r.parentNode;if(t){var n=t.nodeName.toUpperCase();n==="OPTGROUP"&&(t=t.parentNode,n=t&&t.nodeName.toUpperCase()),n==="SELECT"&&!t.hasAttribute("multiple")&&(r.hasAttribute("selected")&&!e.selected&&(r.setAttribute("selected","selected"),r.removeAttribute("selected")),t.selectedIndex=-1)}W(r,e,"selected")},INPUT:function(r,e){W(r,e,"checked"),W(r,e,"disabled"),r.value!==e.value&&(r.value=e.value),e.hasAttribute("value")||r.removeAttribute("value")},TEXTAREA:function(r,e){var t=e.value;r.value!==t&&(r.value=t);var n=r.firstChild;if(n){var i=n.nodeValue;if(i==t||!t&&i==r.placeholder)return;n.nodeValue=t}},SELECT:function(r,e){if(!e.hasAttribute("multiple")){for(var t=-1,n=0,i=r.firstChild,s,o;i;)if(o=i.nodeName&&i.nodeName.toUpperCase(),o==="OPTGROUP")s=i,i=s.firstChild,i||(i=s.nextSibling,s=null);else{if(o==="OPTION"){if(i.hasAttribute("selected")){t=n;break}n++}i=i.nextSibling,!i&&s&&(i=s.nextSibling,s=null)}r.selectedIndex=t}}},O=1,ee=11,te=3,ne=8;function E(){}function Se(r){if(r)return r.getAttribute&&r.getAttribute("id")||r.id}function Te(r){return function(t,n,i){if(i||(i={}),typeof n=="string")if(t.nodeName==="#document"||t.nodeName==="HTML"||t.nodeName==="BODY"){var s=n;n=g.createElement("html"),n.innerHTML=s}else n=ye(n);else n.nodeType===ee&&(n=n.firstElementChild);var o=i.getNodeKey||Se,l=i.onBeforeNodeAdded||E,d=i.onNodeAdded||E,m=i.onBeforeElUpdated||E,u=i.onElUpdated||E,k=i.onBeforeNodeDiscarded||E,P=i.onNodeDiscarded||E,re=i.onBeforeElChildrenUpdated||E,se=i.skipFromChildren||E,j=i.addChild||function(a,c){return a.appendChild(c)},_=i.childrenOnly===!0,C=Object.create(null),A=[];function H(a){A.push(a)}function q(a,c){if(a.nodeType===O)for(var v=a.firstChild;v;){var f=void 0;c&&(f=o(v))?H(f):(P(v),v.firstChild&&q(v,c)),v=v.nextSibling}}function I(a,c,v){k(a)!==!1&&(c&&c.removeChild(a),P(a),q(a,v))}function U(a){if(a.nodeType===O||a.nodeType===ee)for(var c=a.firstChild;c;){var v=o(c);v&&(C[v]=c),U(c),c=c.nextSibling}}U(t);function F(a){d(a);for(var c=a.firstChild;c;){var v=c.nextSibling,f=o(c);if(f){var h=C[f];h&&R(c,h)?(c.parentNode.replaceChild(h,c),L(h,c)):F(c)}else F(c);c=v}}function oe(a,c,v){for(;c;){var f=c.nextSibling;(v=o(c))?H(v):I(c,a,!0),c=f}}function L(a,c,v){var f=o(c);if(f&&delete C[f],!v){var h=m(a,c);if(h===!1||(h instanceof HTMLElement&&(a=h,U(a)),r(a,c),u(a),re(a,c)===!1))return}a.nodeName!=="TEXTAREA"?le(a,c):Z.TEXTAREA(a,c)}function le(a,c){var v=se(a,c),f=c.firstChild,h=a.firstChild,S,w,T,M,B;e:for(;f;){for(M=f.nextSibling,S=o(f);!v&&h;){if(T=h.nextSibling,f.isSameNode&&f.isSameNode(h)){f=M,h=T;continue e}w=o(h);var x=h.nodeType,y=void 0;if(x===f.nodeType&&(x===O?(S?S!==w&&((B=C[S])?T===B?y=!1:(a.insertBefore(B,h),w?H(w):I(h,a,!0),h=B,w=o(h)):y=!1):w&&(y=!1),y=y!==!1&&R(h,f),y&&L(h,f)):(x===te||x==ne)&&(y=!0,h.nodeValue!==f.nodeValue&&(h.nodeValue=f.nodeValue))),y){f=M,h=T;continue e}w?H(w):I(h,a,!0),h=T}if(S&&(B=C[S])&&R(B,f))v||j(a,B),L(B,f);else{var V=l(f);V!==!1&&(V&&(f=V),f.actualize&&(f=f.actualize(a.ownerDocument||g)),j(a,f),F(f))}f=M,h=T}oe(a,h,w);var J=Z[a.nodeName];J&&J(a,c)}var p=t,N=p.nodeType,Y=n.nodeType;if(!_){if(N===O)Y===O?R(t,n)||(P(t),p=Ce(t,Ee(n.nodeName,n.namespaceURI))):p=n;else if(N===te||N===ne){if(Y===N)return p.nodeValue!==n.nodeValue&&(p.nodeValue=n.nodeValue),p;p=n}}if(p===n)P(t);else{if(n.isSameNode&&n.isSameNode(p))return;if(L(p,n,_),A)for(var z=0,ae=A.length;z<ae;z++){var G=C[A[z]];G&&I(G,G.parentNode,!1)}}return!_&&p!==t&&t.parentNode&&(p.actualize&&(p=p.actualize(t.ownerDocument||g)),t.parentNode.replaceChild(p,t)),p}}var Oe=Te(me),Pe=Object.defineProperty,Ae=(r,e,t)=>e in r?Pe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,$=(r,e,t)=>Ae(r,typeof e!="symbol"?e+"":e,t);class K{constructor(e,t){$(this,"previewClient"),$(this,"morphdomOptions"),$(this,"elementCache",new Map),$(this,"regionCommentsCache",new Map),this.previewClient=e||new ie,this.morphdomOptions=t?.morphdom||{},this.previewClient.on("updates.effects",this.handleEffects.bind(this)),this.previewClient.on("craftile.editor.updates",this.handleDirectUpdates.bind(this)),this.cacheRegionComments()}static init(e,t){return new K(e,t)}getElementCached(e){if(this.elementCache.has(e)){const n=this.elementCache.get(e);if(n.isConnected)return n;this.elementCache.delete(e)}const t=document.querySelector(`[data-block="${e}"]`);return t&&this.elementCache.set(e,t),t}cacheRegionComments(){const e=document.createTreeWalker(document.body,NodeFilter.SHOW_COMMENT,null);let t;const n=new Map;for(;t=e.nextNode();){const i=t.textContent?.trim();if(i){if(i.startsWith("BEGIN region: ")){const s=i.substring(14);n.set(s,t)}else if(i.startsWith("END region: ")){const s=i.substring(12),o=n.get(s);o&&(this.regionCommentsCache.set(s,{begin:o,end:t}),n.delete(s))}}}}invalidateCache(e){[...e.updated,...e.removed].forEach(t=>{this.elementCache.delete(t)})}handleEffects(e){const{effects:t,blocks:n,regions:i,changes:s}=e;t&&(this.invalidateCache(s),t.html&&this.handleHtmlEffects(t.html,{blocks:n,regions:i,changes:s}))}handleDirectUpdates(e){const{changes:t}=e;t.moved&&this.handleMoves(e),t.updated.length>0&&this.handleDisabledBlocks(e),t.removed.length>0&&this.handleRemoves(e)}handleMoves(e){const{blocks:t,changes:n}=e;for(const[i,s]of Object.entries(e.changes.moved)){if(s?.toParent&&n.updated?.includes(s?.toParent))continue;if(!this.isValidMoveInstruction(s)){console.warn(`Invalid move instruction for block ${i}:`,s);continue}const o=t[i];this.moveBlockUsingDOM(o,s)}}handleDisabledBlocks(e){const{blocks:t,changes:n}=e;for(const i of n.updated){const s=t[i];if(!s)continue;const l=!!this.getElementCached(i);s.disabled&&l?this.removeBlock(s.id):s.disabled}}handleRemoves(e){const{changes:t}=e;for(const n of t.removed)this.removeBlock(n)}handleHtmlEffects(e,t){const{blocks:n,regions:i,changes:s}=t;for(const o of s.added){const l=e[o];if(!l)continue;const d=n[o];if(!d){console.warn(`Block data not found for ${o}`);continue}if(d.disabled){console.debug(`Skipping disabled block ${o} during add operation`);continue}const m=this.calculatePosition(d,i,n);this.insertBlock(d,l,m)}for(const o of s.updated){const l=e[o];if(!l)continue;const d=n[o];if(!d){console.warn(`Block data not found for ${o}`);continue}if(d.disabled)continue;if(!!this.getElementCached(o))this.updateBlockHtml(d,l);else{const k=this.calculatePosition(d,i,n);this.insertBlock(d,l,k)}}}isValidMoveInstruction(e){const t=!!(e.toParent||e.toRegion),n=e.toIndex===void 0||e.toIndex>=0;return t&&n}removeBlock(e){const t=this.getElementCached(e);t?(this.previewClient.emit("block.remove.before",{blockId:e,element:t}),t.remove(),this.elementCache.delete(e),this.previewClient.emit("block.remove.after",{blockId:e,element:t})):console.warn(`Block ${e} not found for removal`)}moveBlockUsingDOM(e,t){const n=this.getElementCached(e.id),{toParent:i,toRegion:s,toIndex:o}=t;if(!n){console.warn(`Block element ${e.id} not found for move operation`);return}if(this.previewClient.emit("block.move.before",{blockId:e.id,blockType:e.type,block:e,element:n,toParent:i,toRegion:s,toIndex:o}),i){const l=this.getElementCached(i);if(!l){console.error(`Parent element ${i} not found for move operation`);return}this.insertElementInContainer(n,l,e.id,o)}else if(s){const l=this.findRegionInsertionPoint(s,o,void 0,void 0,e.id);if(!l){console.error(`Failed to find insertion point for region: ${s}`);return}l.parent.insertBefore(n,l.before)}this.previewClient.emit("block.move.after",{blockId:e.id,blockType:e.type,block:e,element:n,toParent:i,toRegion:s,toIndex:o})}insertElementInContainer(e,t,n,i){const o=Array.from(t.children).filter(d=>d.getAttribute("data-block")!==n),l=i!==void 0&&i<o.length?o[i]:null;t.insertBefore(e,l)}insertBlock(e,t,n){if(this.getElementCached(e.id))return;this.previewClient.emit("block.insert.before",{blockId:e.id,blockType:e.type,block:e,html:t,positionInfo:n});const i=this.parseHtmlElement(t,e.id);if(!i)return;const{parentId:s,regionName:o,position:l,afterId:d,beforeId:m}=n;if(s){const u=this.getElementCached(s);if(!u){console.error(`Parent element ${s} not found for block ${e.id}`);return}this.insertElementByPosition(i,u,l,d,m)}else if(o){const u=this.findRegionInsertionPoint(o,l,d,m);if(!u){console.error(`Failed to find insertion point for region: ${o}`);return}u.parent.insertBefore(i,u.before)}else console.warn(`No parent or region specified for block ${e.id}, inserting into body`),document.body.appendChild(i);this.elementCache.set(e.id,i),this.previewClient.emit("block.insert.after",{blockId:e.id,blockType:e.type,block:e,html:t,positionInfo:n})}updateBlockHtml(e,t){if(!t){console.warn(`No HTML provided for block ${e.id}`);return}const n=this.getElementCached(e.id);if(!n){console.warn(`Block element ${e.id} not found for HTML update`);return}this.previewClient.emit("block.update.before",{blockId:e.id,blockType:e.type,block:e,element:n,html:t}),Oe(n,t,this.morphdomOptions),this.elementCache.delete(e.id),this.previewClient.emit("block.update.after",{blockId:e.id,blockType:e.type,block:e,element:n,html:t})}insertElementByPosition(e,t,n,i,s){let o=null;if(s)o=this.getElementCached(s);else if(i){const l=this.getElementCached(i);l&&(o=l.nextElementSibling)}else typeof n=="number"&&(o=Array.from(t.children)[n]||null);t.insertBefore(e,o)}findRegionInsertionPoint(e,t,n,i,s){const o=this.regionCommentsCache.get(e);if(!o)return console.error(`Region comments not found for region: ${e}`),null;const{begin:l,end:d}=o;let m=null;if(i){const u=this.getElementCached(i);u&&(m=u)}else if(n){const u=this.getElementCached(n);u&&u.nextSibling&&(m=u.nextSibling)}else typeof t=="number"&&(m=this.findPositionInRegion(l,d,t,s));return m||(m=d),{parent:l.parentNode,before:m}}findPositionInRegion(e,t,n,i){const s=[];let o=e.nextSibling;for(;o&&o!==t;){if(o.nodeType===Node.ELEMENT_NODE&&o.hasAttribute("data-block")){const l=o.getAttribute("data-block");(!i||l!==i)&&s.push(o)}o=o.nextSibling}return n<s.length?s[n]:null}calculatePosition(e,t,n){if(e.parentId){const i=n[e.parentId];i||console.warn(`Block data not found for block ${e.id}`);const s=i.children.indexOf(e.id);if(s===-1)return console.warn(`Block ${e.id} not found in parent ${e.parentId} children`),{parentId:e.parentId};const{afterId:o,beforeId:l}=this.findAdjacentSiblings(i.children,s,n);return{parentId:e.parentId,position:s,afterId:o,beforeId:l}}else{for(const i of t){const s=i.blocks.indexOf(e.id);if(s!==-1){const{afterId:o,beforeId:l}=this.findAdjacentSiblings(i.blocks,s,n);return{regionName:i.name,position:s,afterId:o,beforeId:l}}}return{}}}findAdjacentSiblings(e,t,n){let i,s;for(let o=t-1;o>=0;o--){const l=n[e[o]];if(l&&!l.disabled){i=e[o];break}}for(let o=t+1;o<e.length;o++){const l=n[e[o]];if(l&&!l.disabled){s=e[o];break}}return{afterId:i,beforeId:s}}parseHtmlElement(e,t){if(!e.trim())return console.error(`Empty HTML provided for block ${t}`),null;const n=document.createElement("div");n.innerHTML=e;const i=n.firstElementChild;return i||(console.error(`Invalid HTML for block ${t}: no element found`),null)}}const X=new ie;K.init(X,{morphdom:{onBeforeElUpdated(r,e){return console.log(r,e),r._x_dataStack&&typeof window.Alpine?.morph=="function"?(window.Alpine.morph(r,e,{updating(t,n,i){if(t instanceof HTMLElement&&n instanceof HTMLElement&&t.hasAttribute("wire:id"))return i()}}),!1):!0}}});function He(r){const{block:e,key:t,value:n}=r,s=`data-live-update-${[e.id,t].filter(Boolean).join(".")}`,o=`[${CSS.escape(s)}]`,l=document.querySelectorAll(o);if(l.length)for(const d of l){const m=d.getAttribute(s),[u,k]=m?.split(/:(.+)/)??["text",void 0];switch(u){case"text":d.textContent=n;break;case"html":d.innerHTML=n;break;case"outerHTML":d.outerHTML=n;break;case"attr":if(n)d.setAttribute(k,n);else{if(d.tagName.toLowerCase()==="img"&&k==="src")return!1;d.removeAttribute(k)}break;case"style":n?d.style.setProperty(k,n):d.style.removeProperty(k);break;case"toggleClass":d.classList.toggle(k);break;default:console.warn(`Unknown live update type: ${u}`)}}}X.on("block.property.updated",He);X.on("block.insert.after",r=>{const e=document.querySelector(`[data-block="${r.blockId}"]`);e&&e.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})});
